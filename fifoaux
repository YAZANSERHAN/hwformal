bit any_cycle;
assume property (@(posedge clk) $rose(any_cycle) |-> always !any_cycle);

logic [WIDTH-1:0] f_data;
logic [PTRW:0] f_count;
logic captured;

always_ff @(posedge clk) begin
if (!rst) begin
captured <= 0;
f_data <= 0;
f_count <= 0;
end else if (do_enq && any_cycle && !captured) begin
f_data <= enq_data;
f_count <= count;
captured <= 1;
end
end

logic [PTRW:0] out_cnt;
always_ff @(posedge clk) begin
if (!rst || !captured) begin
out_cnt <= 0;
end else if (do_deq) begin
out_cnt <= out_cnt + 1'b1;
end
end

property P;
@(posedge clk) disable iff (!rst)
(captured && do_deq && (out_cnt == f_count)) |-> (deq_data == f_data);
endproperty

A: assert property (P);

endmodule
